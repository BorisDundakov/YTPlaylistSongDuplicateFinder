# a workflow that will loop over the specified playlist
# once every 24 hours. Results to be displayed as a push 
# notification or something


name: check for duplicates

on:
  push:
    
  #schedule:
    # runs the cron job at 00:00 every day
    #- cron: '0 0 * * *'

  #N.B!! each job needs to start by checking out current repo first??!!

jobs:
  
  setup:
    runs-on: ubuntu-latest
    
    steps:
      - name: checkout current repo
        uses: actions/checkout@v3

      - name: install youtube-dl
        run:  pip install --upgrade youtube-dl


  run-bash-file:
    needs: setup
    runs-on: ubuntu-latest

    steps:
      - name: checkout current repo
        uses: actions/checkout@v3

      - name: print current working directory
        run: pwd
      
      - name: list working directory
        run: ls

      - name: run bash-file from command line
        run: |
          ./script.bash https://www.youtube.com/playlist?list=PLGC6q23peGMFH3cIWKXgg9DPOaTyqMNAU
      
      - name: save Results
        run: |
          git config --global user.email "boris.stefan.de@gmail.com"
          git config --global user.name "BorisDundakov"

          git add .
          git diff-index --quiet HEAD || git commit -m "Updating duplicates.txt"
          git push origin master
